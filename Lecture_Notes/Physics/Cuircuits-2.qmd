---
title: Circuits 2
format:
  html:
    theme: flatly
    toc: true
    toc-depth: 3
    highlight-style: tango
    code-line-numbers: true
    code-fold: true
    code-summary: "Show the code"
    code-tools: true
    code-block-bg: "rgba(42, 174, 42, 0.02)"
    code-block-border-left: "#2aae2a"
    code-language-label: true
    css: styles.css
    math: mathjax
    self-contained: true
    other-links:
      - text: Main page
        href: https://dchorazkiewicz.github.io/Mathematics_Physics_Lectures   

---
## Introduction

This part covers the non-trivial aspects of electrical circuits, including alternating current (AC) circuits, diodes, transistors, and RLC circuits. Understanding these concepts is essential for designing and analyzing electronic devices and systems.

We also present the Falstad Circuit Simulator, a powerful online tool for visualizing and analyzing electrical circuits.

## Altering current and voltage

Current is the flow of electric charge through a conductor, measured in amperes (A). Along we also provide voltage characteristics measured in volts (V).

![Source: Wikipedia](./pics/circuits/currents.png)

### AC and DC currents

**Alternating Current** (AC) is characterized by its ability to change direction periodically, in contrast to **Direct Current** (DC), which flows in the same direction. 

AC is the standard for electricity distribution due to its efficiency over long distances. It is also easier to convert AC to different voltages using transformers. DC is used in batteries and electronic devices.

![Source: Wikipedia](./pics/circuits/alternating.png)

![](./pics/circuits/direct_alternating.png)

The mathematical representation of AC is given by:

$$V(t) = V_{max} \sin(\omega t + \phi)
$$

$$I(t) = I_{max} \sin(\omega t + \phi)
$$

where:

- $V(t)$ is the voltage at time $t$$,
- $V_{max}$ is the maximum voltage,
- $I(t)$ is the current at time $t$$,
- $I$_{max}$ is the maximum current.
- $\omega$ is the angular frequency,
- $\phi$ is the phase angle.

Animation: [AC generator](https://youtu.be/CWulQ1ZSE3c?si=6n2H8fgqHRtsIF38) and [AC vs DC generators](https://youtu.be/H1aKEcM2YOo?si=_WibXf72j35dmwzx)

### Three-Phase AC Systems

Three-phase systems use three AC currents, each phase shifted by 120Â° from the others. They are commonly used in industrial applications due to their efficiency and power distribution capabilities.

- [Three-Phase Altenator]([./pics/circuits/phase3.png](https://youtu.be/0k2u3zmT5aY?si=3hA5wYOdm36vW2lB&t=137))

This arrangement enhances power distribution efficiency by the  $\sqrt{3}$ factor. The total power in a three-phase system is given by:

$$P_{\text{total}} = 3 \cdot V_{\text{line}} \cdot I_{\text{line}} \cdot \cos(\phi)
$$

where $V_{\text{line}}$ is the line voltage, $I_{\text{line}}$ is the line current, and $\phi$ is the phase angle.

### Electromotive Force (EMF)

Electromotive force (EMF)is the voltage generated by a source of electrical energy, such as a battery or generator. We will use the symbol $\epsilon$ for EMF. It is measured in volts (V) and represents the electrical potential difference between two points in a circuit. EMF is responsible for driving current through a circuit and powering electrical devices.

EMF is not a force in the traditional sense but rather a measure of the energy per unit charge provided by the source. It is analogous to the pressure in a hydraulic system that drives the flow of water. EMF is the total energy provided by the source per unit charge, including the energy lost due to internal resistance.

The EMF of a source is equal to the potential difference across its terminals when no current is flowing. When current flows, the voltage across the terminals may drop due to internal resistance, leading to a lower terminal voltage.

The SI unit of EM is the same as that for potential, the volt $[V]=[J/C]$. A typical flashlight battery has an EMF of 1.5 V; this means that the battery does 1.5 J of work on every coulomb of charge that passes through it.

## Modern Electronics

Electrical properties of materials are critical for designing electronic components: 

- Insulators exhibit high resistivity.
- Semiconductors have variable resistivity (influenced by doping and temperature).
- Conductors exhibit low resistivity.

In semiconductors, the valence band is the highest energy band that is fully occupied by electrons, while the conduction band is the next highest energy band that is empty or partially filled. The energy gap between the valence and conduction bands determines the conductivity of the semiconductor.

**Valence Band** is the highest range of electron energies. Electrons are bound to atoms and participate in chemical reactions. When these electrons gain sufficient energy, they can move to the conduction band, becoming free to conduct electricity.

- **Insulators**: Have a large band gap (e.g., diamond), making it difficult for electrons to move from the valence band to the conduction band, thus they do not conduct electricity well.
- **Semiconductors**: Have a smaller band gap (e.g., silicon, germanium). They can conduct electricity under certain conditions, such as when doped with other elements or when exposed to light.
- **Conductors**: Have no band gap because the valence band and conduction band overlap, allowing electrons to move freely and conduct electricity efficiently (e.g., metals like copper).

**Doping and the P-N Junction**

Semiconductor doping (process of adding impurities to a semiconductor material) introduces carriers, enhancing conductivity. Doping can be done with different types of impurities, such as boron, phosphorus, and arsenic, to create p-type and n-type semiconductors.

Timeline of Key Discoveries in Physics and Electronics:

- **1896**: Electron Discovered
- **1911**: Superconductivity
- **1925**: Quantum Mechanics
- **1935**: *Semiconductors* (Significant Progress)
- **1948**: Transistor
- **1957**: Tunnel Diode
- **1960s**: Semiconductor Laser
- **1980**: Quantum Hall Effect
- **1986**: High-Temperature Superconductivity
- **2010s**: Topological Insulators

A doped semiconductor is a semiconductor with impurities added to it to alter its electrical properties. The impurities are called dopants. 

The two types of doped semiconductors are:

**P-Type Semiconductor**

- Made by dding a small amount of an element that has one less valence electron than the semiconductor material (like silicon).
- **Result**: Creates "holes" or POSITIVE charge carriers because there's a spot where an electron could be, but isn't.

**N-Type Semiconductor**

- Made by dding a bit of an element that has one more valence electron than the semiconductor material.
- **Result**: Extra electrons are available, creating NEGATIVE charge carriers.

**P-N Junction** is a boundary between p-type and n-type semiconductors. It is a key component in diodes, transistors, and solar cells.

Why It's Important?

- **Unidirectional Conductivity**: A PN junction allows current to flow more easily in one direction than the other. When you apply a voltage in one direction, it pushes the electrons and holes towards the junction, allowing current to flow. When you reverse the voltage, it pulls them away from the junction, making it hard for current to flow. This is how diodes work.
- **Applications**: This principle is what makes semiconductors so useful in electronics. They can be used to control electrical current flow in circuits, which is foundational for creating all kinds of electronic devices.

### Diode

A **diode** is a passive two-terminal electrical component that allows current to flow in one direction only. It consists of a semiconductor material with two regions: a p-type region with an excess of positive charge carriers (holes) and an n-type region with an excess of negative charge carriers (electrons). 

Positive bias (forward bias) allows current to flow, while negative bias (reverse bias) blocks current flow. 

Practical uses: rectification (converting AC to DC), protection circuits, and signal demodulation.

[Diodes](https://tinyurl.com/yc2359yk) are commonly used in electronic circuits for various purposes, such as rectification, signal demodulation, and voltage regulation. They are represented by the symbol "D" in circuit diagrams.

![Source: Wikipedia](./pics/circuits/diode123.png)

In SchmeaDraw, the symbol for a diode is given by:
```{python}
import schemdraw
import schemdraw.elements as elm

with schemdraw.Drawing() as d:
    d += elm.Diode().label('D')
```

Falstad simulation: [Diode](https://www.falstad.com/circuit/e-rectify.html)

#### Equation for diode

The (Shockley) [ideal diode equation](https://www.wolframalpha.com/input?i=diode+240+mA) describes the current-voltage relationship of a diode. It is given by the equation:

$$I = I_s \left( e^{\frac{V}{n V_T}} - 1 \right)$$

where:

- $I$ is the current through the diode.
- $I_s$ is the saturation current, a parameter that characterizes the diode.
- $V$ is the voltage across the diode.
- $n$ is the ideality factor, a parameter that accounts for non-ideal behavior.
- $V_T$ is the thermal voltage, approximately 25 mV at room temperature.

The diode equation is an exponential relationship between current and voltage, with the saturation current setting the scale of the current and the ideality factor affecting the shape of the curve.

**Diode Characteristics:**

- **Forward Bias**: When the voltage across the diode is positive, it allows current to flow in the forward direction. The diode has a low resistance and conducts electricity.

- **Reverse Bias**: When the voltage across the diode is negative, it blocks current flow in the reverse direction. The diode has a high resistance and does not conduct electricity.

- **Breakdown Voltage**: If the reverse voltage exceeds a certain threshold, the diode breaks down and conducts in the reverse direction. This is known as the breakdown voltage.

- **Forward Voltage Drop**: The voltage drop across the diode when it is conducting current in the forward direction. It is typically around 0.7 volts for silicon diodes and 0.3 volts for germanium diodes.


**Main Types of diodes:**

- **Rectifier diode**: converts AC voltage to DC voltage by allowing current to flow in one direction only.

- **Zener diode**: regulates voltage by maintaining a constant voltage across its terminals.

- **Light-emitting diode** (LED): emits light when current flows through it.

- **Varactor diode**: changes capacitance with applied voltage, used in tuning circuits. Varactor diodes are used in voltage-controlled oscillators, phase-locked loops, and frequency synthesizers.

- **Photodiode**: converts light into electrical current, used in light sensors and solar cells.

#### Rectifier diode

A rectifier diode is a type of diode that converts alternating current (AC) to direct current (DC) by allowing current to flow in one direction only. It is used in power supplies, battery chargers, and other electronic devices that require DC voltage. Rectifier diodes are commonly used in bridge rectifiers, half-wave rectifiers, and full-wave rectifiers to convert AC voltage to DC voltage.

The rectifier diode operates by allowing current to flow when the voltage across its terminals is positive and blocking current flow when the voltage is negative. This process converts the AC voltage into a pulsating DC voltage that can be smoothed using capacitors and filters to produce a stable DC voltage.

Rectifier diodes are available in different types, such as silicon diodes, germanium diodes, Schottky diodes, and fast-recovery diodes, each with specific characteristics and applications.

#### Single diode:

![Source: Wikipedia](./pics/circuits/diode_works.png)

#### Four diodes in a bridge rectifier:

![Source: Wikipedia](./pics/circuits/rectifier.png)

#### Diode with somothing out condensator:

![Source: Wikipedia](./pics/circuits/rectifier_with_condensator.png)

#### Zener Diode

A Zener diode is a special type of diode designed to reliably allow current to flow "backwards" (inverted polarity) when a certain threshol of reverse voltage, known as the [Zener voltage](https://www.falstad.com/circuit/e-zeneriv.html), is reached.

![Source: Wikipedia](./pics/circuits/zener.png)

They are used to generate low-power stabilized supply rails from a higher voltage and to provide reference voltages for circuits, especially stabilized power supplies. 

Zener effect is a phenomenon that occurs in a reverse-biased p-n junction diode when the electric field enables tunneling of electrons from the valence band of the p-type material to the conduction band of the n-type material, creating a population of minority carriers in the p-type material, which suddenly increase the reverse current.

This makes it useful for stabilizing voltage levels in electronic circuits. They are also used to protect circuits from overvoltage, especially electrostatic discharge.

### Transistor

A transistor is an active three-terminal electrical component that amplifies or switches electronic signals and electrical power. It consists of three layers of semiconductor material: an emitter, a base, and a collector. 

- Collector is the terminal that collects the current.
- Emitter is the terminal that emits the current.
- Base is the terminal that controls the current flow between the collector.

The base terminal controls the flow of current between the emitter and collector terminals, allowing the transistor to amplify or switch signals.

Transistors are commonly used in electronic circuits for various applications, such as amplification, switching, and signal processing. They are represented by the symbol "Q" in circuit diagrams.

Before transistors were developed, vacuum (electron) tubes (or in the UK "thermionic valves" or just "valves") were the main active components in electronic equipment.  Transistors revolutionized the field of electronics and paved the way for smaller and cheaper radios, calculators, computers, and other electronic devices.

![](./pics/circuits/transistor.png)

Link: [video about transitors](https://youtu.be/J4oO7PT_nzQ?si=Zu4Wtv1CkCLBYvxR)

**Main Types of transistors:**

- Bipolar junction transistor (**BJT**): consists of p-n-p or n-p-n layers, used in amplification and switching circuits.

- Field-effect transistor (**FET**): consists of gate, source, and drain terminals, used in amplification and switching circuits.

- Metal-oxide-semiconductor field-effect transistor (**MOSFET**): consists of metal, oxide, and semiconductor layers, used in power amplifiers and digital circuits.

## RLC Circuits

An [RLC circuit](https://en.wikipedia.org/wiki/RLC_circuit) is a type of electrical circuit that contains:

- resistors R,
- inductors L,
- and capacitors C.

These components interact to control the flow of current and energy in the circuit. RLC circuits are used in a wide range of electronic devices and systems for various applications, such as filtering, tuning, and signal processing.

One can have DC or AC RLC circuits. Elements in the circuit can be connected in series or parallel.

Example of (series type) RLC circuit in SchemaDraw:

```{python}
import schemdraw
import schemdraw.elements as elm

# Create the drawing
with schemdraw.Drawing():
    L = elm.Inductor().label('$L$').length(6)
    C = elm.Capacitor().down().label('$C$', loc='right').length(6)
    Vs= elm.SourceV().left().label('$V_s$', loc='bottom').length(6)
    R = elm.Resistor().up().label('$R$').length(6)
    elm.LoopCurrent([L, C, Vs, R], direction='cw').label('$I$')
```

Using Kirchhoff's Voltage Law (KVL) for an RLC circuit, we have drop in voltage across the resistor, inductor, and capacitor equal to the source voltage:

$$V_s - V_R - V_L - V_C = 0,
$$
where $V_s=\varepsilon$ is the source voltage, V_R is the voltage across the resistor, V_L is the voltage across the inductor, and V_C is the voltage across the capacitor.

Substituting the respective expressions for $V_R$, $V_L$, and $V_C$ gives us:

$$\varepsilon- IR - L \frac{d I}{dt} - \frac{Q}{C} = 0
$$

After substituting $I = \frac{dQ}{dt}$, the differential equation for an RLC circuit becomes:

$$L\frac{d^2Q}{dt^2} +R\frac{dQ}{dt} + \frac{1}{C}Q=\varepsilon
$$

where $I$ is the current through the resistor, $R$ is the resistance, $L$ is the inductance, $\frac{d I}{dt}$ is the rate of change of current with respect to time, $Q$ is the charge on the capacitor, and $C$ is the capacitance.

The solution to the differential equation depends on the initial conditions of the circuit, such as the initial current and voltage values. By solving the differential equation, you can determine the transient and steady-state response of the RLC circuit to different input signals.

Link 1: [WolframAlpha example](https://www.wolframalpha.com/input?i=RLC+circuit+10ohm%2C+12H%2C+400uF)

Link 2: [Falstad RLC circuit](https://www.falstad.com/circuit/e-lrc.html)

### Applications of RLC circuits

RLC circuits are essential components of a wide range electronic devices and systems, allowing engineers to control the flow of current, store energy,  filtering, tuning and filter signals. 

Some common applications of RLC circuits include:

- Bandpass filters: RLC circuits can be used to filter out unwanted frequencies and pass only the desired frequencies in electronic circuits. Bandpass filters are commonly used in radio receivers, audio amplifiers, and communication systems.

- Oscillators: RLC circuits can be used to generate oscillating signals at specific frequencies in electronic circuits. Oscillators are commonly used in clock circuits, signal generators, and radio transmitters.

- Amplifiers: RLC circuits can be used to amplify signals and control the gain of electronic circuits. Amplifiers are commonly used in audio amplifiers, power amplifiers, and signal processing systems.

- Resonant circuits: RLC circuits can be used to create resonant circuits that exhibit maximum current flow and minimum impedance at specific frequencies. Resonant circuits are commonly used in tuning circuits, filtering signals, and amplifying signals.

### RLC and harmonic oscillator analogy

The behavior of the RLC circuit can be compared to the motion of a harmonic oscillator under different conditions.

In a series **RLC circuit**, the resistor, inductor, and capacitor interact to control the flow of current and energy in the circuit. The resistor dissipates energy, the inductor stores energy in a magnetic field, and the capacitor stores energy in an electric field. The behavior of the RLC circuit is influenced by the values of the resistance, inductance, and capacitance of the components.

In a **harmonic oscillator system**, the damping force, mass, and spring constant interact to control the motion of the oscillator. The damping force dissipates energy, the mass stores kinetic energy, and the spring constant stores potential energy. The behavior of the harmonic oscillator system is influenced by the values of the damping force, mass, and spring constant.

**A damped harmonic oscillator with the external force:**
$$m\frac{d^2x}{dt^2} + b\frac{dx}{dt} + kx = F_{ext}
$$

where $m$ is the mass, $b$ is the damping coefficient, $k$ is the spring constant, $x$ is the displacement of the oscillator, $t$ is time, and $F_{ext}$ is the external (driven) force.

In comparizon with the RLC circuit:

$$L\frac{d^2Q}{dt^2} +R\frac{dQ}{dt} + \frac{1}{C}Q=\varepsilon
$$

where $L$ is the inductance, $R$ is the resistance, $C$ is the capacitance, $Q$ is the charge on the capacitor, $t$ is time, and $\varepsilon$ is the source voltage.

Therefore, the RLC circuit and the harmonic oscillator system share similar characteristics and can be analyzed using similar mathematical models.

- inductor represents the **mass of the oscillator** $m$, 

- resistor represents the **damping force** $F_{damping}= -b * v$,

- capacitor represents the **spring constant of the oscillator** $k$. 

- source voltage (emf) represents the **external driven force** $F_{ext}$.

### RLC Impedance

Alternating current in RLC circuits is analyzed using Kirchhoff's equations and Ohm's Law. It is characterized by **impedance**, which determines the resistance of the circuit to alternating current. 

The **impedance** of an RLC circuit is the total opposition to the flow of current in the circuit. It is a complex quantity that includes both resistance and reactance components. 

**Reactance** is the opposition to the flow of alternating current caused by inductance and capacitance in the circuit. It is a measure of the circuit's ability to store and release energy in the form of a magnetic field (inductive reactance) or an electric field (capacitive reactance). We denote inductive reactance as $X_L=2\pi f L$ and capacitive reactance as $X_C=\frac{1}{2\pi f C}$. Additionally  the reprocity of impedance is called **admittance**.

We often use the magnitude of the impedance (to avoid complex numbers). For series RLC:
$$|Z| = \sqrt{R^2 + (X_L - X_C)^2}= \sqrt{R^2 + (2\pi f L - \frac{1}{2\pi f C})^2}
$$

where $R$ is the resistance, $X_L$ is the inductive reactance, $X_C$ is the capacitive reactance, $f$ is the frequency of the input signal, $L$ is the inductance, and $C$ is the capacitance.


The impedance of an RLC circuit depends on the frequency of the input signal. At low frequencies, the inductive reactance is dominant, and the impedance is mainly resistive. At high frequencies, the capacitive reactance is dominant, and the impedance is mainly reactive.

The impedance of an RLC circuit can be calculated using Ohm's law and the voltage-current relationship for resistors, inductors, and capacitors. By analyzing the impedance of the circuit, you can determine the current response of the circuit to different input signals and frequencies.

### RLC Resonance

RLC resonance is a phenomenon that occurs in electrical circuits when the inductive and capacitive reactances cancel each other out ($X_L = X_C$), resulting in a maximum current flow and minimum impedance. RLC resonance is characterized by a sharp peak in the current response of the circuit at a specific frequency called the resonant frequency.

The resonant frequency:

$$
f_0 = \frac{1}{2\pi\sqrt{LC}}
$$

where $f_0$ is the resonant frequency, $L$ is the inductance of the circuit, $C$ is the capacitance of the circuit, and $\pi$ is the mathematical constant pi.

The parallel and series RLC circuits will have the same resonant frequency. However, the impedance in a parallel RLC circuit is maximized at resonance ([minimal](https://www.falstad.com/circuit/e-res-par.html) current flow through the circuit), whereas it is minimized in the series RLC circuit at resonance ([maximum](https://www.falstad.com/circuit/e-res-series.html) current flow through the circuit).

At resonance, the total impedance of the circuit is minimized, resulting in a maximum current flow through the circuit. In this way, the two types of RLC circuits provide two different types of filtering behavior: bandpass and bandstop.

## Falstad Circuit Simulator

The Falstad Circuit Simulator is a powerful online tool for visualizing and analyzing electrical circuits. It provides an intuitive interface for building, simulating, and observing circuit behavior in real-time. The simulator supports a wide range of components, including resistors, capacitors, inductors, diodes, transistors, and more.

### Instructions for Using Falstad

Open the [Falstad Circuit Simulator](https://www.falstad.com/circuit/) in your web browser to access the tool. 

How to build and simulate circuits:

1. Click on "File/New Blank Circuit". It with start a blank canvas to build your circuit from scratch.
2. Click on "Draw/Add Resistor" and place it on the canvas using your mouse (left-right direction). By the default value is $1k\, \Omega$, that is 1000 ohms.
3. Double-click on the resistor to change its resistance value, for example, to $R = 10 \, \Omega$.
4. Click on "Draw/Inputs an Sources/Add Voltage Source (2 terminal)" and place it on the canvas connecting it to the resistor. Double-click on the voltage source to set its value, for example, to $V = 20 \, \text{V}$.
5. Click on "Draw/Add Resistor" again and place it on the canvas to add another resistor. Double-click on the resistor to set its value, for example, to $R = 5 \, \Omega$.
6. Click on "Draw/Add Wire" and connect the components by clicking on one terminal and dragging the wire to the other terminal.
7. Adjust the Simulation Speed and Current Speed using the sliders on the right.

As the result you should obtain: [the following circuit](https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWK0CcAOFYAskUDYBmArBBAdgTxALJCQUjoFMBaMMAKACcR9wwATCCwEh7IYzCQOAN2Gj+QkUIJ40UDThADGu5Am7yVa3lVXrGBgO6nqJvuKgcgA).

**Remarks**

- start with the disconnected elements like resistors, capacitors, inductors in the ritht places
- depending on the case adding sources DC, diodes, etc. pay attention to the direction of the element (Voltage has a defined direction and it matters if you draw it from the left to right or opposite).
- at the end connect everything with wires. 
- make sure that the circuit is closed (no open ends)!
- change values by double-clicking on the element
- use mouse to drag the elements and make sure that the circuit is clear and readable: 
  - Ctr + Left Mouse Click = to drag the elements.
  - Shift + Left Mouse Click = to move the element.

### List of defined examples

- [https://www.falstad.com/circuit/e-index.html](https://www.falstad.com/circuit/e-index.html)

## References

- D. Halliday, R. Resnick, and J. Walker, *Fundamentals of Physics*.  
- J.D. Irwin, *Basic Engineering Circuit Analysis*.  
- Thomas L. Floyd, *Electronic Devices*.  
- [HyperPhysics](http://hyperphysics.phy-astr.gsu.edu/) website for quick reference.
- [electronics-tutorials](https://www.electronics-tutorials.ws/accircuits/parallel-circuit.html)- [Circuit Builder I](https://everycircuit.com/app)
- [Circuit Builder II](https://www.circuitlab.com/editor/#?id=27h7g9mt6rwy)
- [Schemdraw](https://schemdraw.readthedocs.io/en/stable/usage/start.html) package to draw circuits.
- [Falstad Circuit Simulator](https://www.falstad.com/circuit/) for visualizing and analyzing electrical circuits.
- [Circuitikz](https://tikz.dev/library-circuits) package to draw circuits in documents.